{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n \n\nexport class PixabayAPI {\n    static PAGE_SIZE = 15;\n    constructor(){\n        this.query = null;\n        this.totalResult = 0;\n        this.currentPage = 1;\n    }\n    \n    async getImages(){\n    const url = 'https://pixabay.com/api/';\n    \n    const options = {\n        params: {\n            key : '42200986-2d8f017897691a4245488f945',\n            q: this.query,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safeSearch: true, \n            page: this.currentPage, \n            per_page: PixabayAPI.PAGE_SIZE,\n        },\n    };\n    try{\n        const res = await axios.get(url , options);\n        return res.data;\n    } catch(error) {\n        console.error('Error fetching images:', error);\n        throw error;\n    }\n}\n}","\nconst galleryElem = document.querySelector('.gallery-list');\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\n\nfunction imageTemplate ({\n    webformatURL, \n    largeImageURL, \n    tags, \n    likes, \n    views, \n    comments, \n    downloads}){\n    return ` <a href=\"${largeImageURL}\" class=\"gallery\">\n    <figure class=\"gallery-figure\"> \n     <img src=\"${webformatURL}\" alt=\"${tags}\" class=\"gallery-img\"/>\n     <figcaption class=\"gallery-figcaption\">\n     <div class=\"img-item\">Likes <span class=\"img-elem\">${likes}</span></div>\n     <div class=\"img-item\">View <span class=\"img-elem\">${views}</span></div>\n     <div class=\"img-item\">Comments <span class=\"img-elem\">${comments}</span></div>\n     <div class=\"img-item\">Downloads <span class=\"img-elem\">${downloads}</span></div>\n     </figcaption>\n     </figure>\n     </a>`;\n}\n\n \n export function renderImages(images){\n    const markup = images.map(imageTemplate).join('');\n    galleryElem.insertAdjacentHTML('beforeend', markup);\n    const lightBox = new SimpleLightbox('.gallery-list a');\n    lightBox.refresh();\n}","import {PixabayAPI} from './js/pixabay-api';\nimport {renderImages} from './js/render-functions'\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n \n\nconst refs = {\n    formElem: document.querySelector('.form'),\n    inputElem: document.querySelector('.form-input'),\n    btnElem: document.querySelector('.form-button'),\n    galleryElem: document.querySelector('.gallery-list'),\n    btnLoadMoreElem: document.querySelector('.btn-load-more'),\n    loaderElem: document.querySelector('.loader'),\n};\n\n const pixabayAPI = new PixabayAPI();\n \n//===============================================================\n\nrefs.formElem.addEventListener('submit', onBtnSubmit);\n\nasync function onBtnSubmit(e) {\ne.preventDefault();\n\nshowLoader();\nconst inputValue = e.target.elements.query.value.trim();\nif(!inputValue) {\n    refs.loaderElem.classList.add('hidden');\n    iziToast.show({\n        message: `Please enter your search query.`,\n        position: 'topRight',\n        color: 'red',\n    })\n    return;\n};\npixabayAPI.query = inputValue;\npixabayAPI.currentPage = 1;\nrefs.galleryElem.innerHTML = '';\ntry{\n    const data = await pixabayAPI.getImages();\n    pixabayAPI.totalResult = data.totalHits;\n    renderImages(data.hits);\n}catch(err){\n    pixabayAPI.totalResult = 0;\n    iziToast.error({\n        title: 'Error',\n        message: err.message,\n      });\n}\n\nhideLoader();\ncheckBtnStatus();\nrefs.formElem.reset();\n}\n\n//===============================================================\n\nrefs.btnLoadMoreElem.addEventListener('click', onBtnLoadMore);\n\nasync function onBtnLoadMore(){\n showLoader();\n try{\n    pixabayAPI.currentPage += 1;\n    const data = await pixabayAPI.getImages();\n    renderImages(data.hits); \n }catch(err){\n    pixabayAPI.totalResult = 0;\n    iziToast.error({\n        title: 'Error',\n        message: err.message,\n      });\n}\n hideLoader();\n checkBtnStatus();\n\n\n const galleryCardHeight = document.querySelector('.gallery-img').getBoundingClientRect().height;\n window.scrollBy({\n   top: 2 * galleryCardHeight,\n   behavior: 'smooth',  \n });\n}\n//===============================================================\n\nfunction checkBtnStatus () {\n    const maxPage = Math.ceil(pixabayAPI.totalResult / PixabayAPI.PAGE_SIZE);\n    const lastPage = maxPage <= pixabayAPI.currentPage;\n    if(lastPage){\n        refs.btnLoadMoreElem.classList.add('hidden');\n        if(pixabayAPI.totalResult === 0){\n            iziToast.show({\n                message: `We're sorry, there are no results.`,\n                position: 'topRight',\n                color: 'red',\n            })}else {\n        iziToast.show({\n            message: `We're sorry, but you've reached the end of search results.`,\n            position: 'topRight',\n            color: 'blue',\n        });\n      }\n    } else {\n        refs.btnLoadMoreElem.classList.remove('hidden');\n    }\n    }\n\n//===============================================================\n\nfunction showLoader(){\n refs.loaderElem.classList.remove('hidden');\n refs.btnLoadMoreElem.classList.add('hidden');\n};\n\nfunction hideLoader(){\n refs.loaderElem.classList.add('hidden');\n refs.btnLoadMoreElem.classList.remove('hidden');\n};\n\n\n"],"names":["_PixabayAPI","url","options","axios","error","__publicField","PixabayAPI","galleryElem","imageTemplate","webformatURL","largeImageURL","tags","likes","views","comments","downloads","renderImages","images","markup","SimpleLightbox","refs","pixabayAPI","onBtnSubmit","e","showLoader","inputValue","iziToast","data","err","hideLoader","checkBtnStatus","onBtnLoadMore","galleryCardHeight"],"mappings":"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"}